<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Dark Idle</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body {
  background: radial-gradient(circle at top, #14141c, #050507);
  color: #fff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  margin: 0;
  padding: 20px;
  padding-bottom: 100px;
  text-align: center;
}

/* ===== VOID CARD ===== */
.void-card {
  background: rgba(20,20,30,0.6);
  backdrop-filter: blur(14px);
  border-radius: 26px;
  padding: 30px 20px;
  box-shadow:
    0 0 50px rgba(120,90,255,0.25),
    inset 0 0 40px rgba(0,0,0,0.9);
}

/* ===== VOID RING ===== */
.void-ring {
  margin: 20px auto 30px;
  width: 200px;
  height: 200px;
  position: relative;
}

.void-ring svg {
  width: 100%;
  height: 100%;
}

.ring-spin {
  transform-origin: 50% 50%;
  animation: rotate 20s linear infinite;
  transition: filter 0.3s, transform 0.3s;
}

.void-ring.active .ring-spin {
  filter: brightness(1.4);
  animation-duration: 6s;
}

/* ===== PARTICLES ===== */
.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #9f8cff;
  border-radius: 50%;
  opacity: 0.7;
  animation: orbit 12s linear infinite;
}

.particle:nth-child(1) { top: 10%; left: 50%; animation-duration: 10s; }
.particle:nth-child(2) { top: 50%; left: 90%; animation-duration: 14s; }
.particle:nth-child(3) { top: 90%; left: 50%; animation-duration: 18s; }
.particle:nth-child(4) { top: 50%; left: 10%; animation-duration: 22s; }

@keyframes orbit {
  from { transform: rotate(0deg) translateX(90px) rotate(0deg); }
  to   { transform: rotate(360deg) translateX(90px) rotate(-360deg); }
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

/* ===== TEXT ===== */
.void-amount {
  font-size: 34px;
  font-weight: 700;
}

.void-sub {
  font-size: 14px;
  opacity: 0.7;
  margin-bottom: 20px;
}

button {
  background: linear-gradient(135deg, #6f42c1, #9f8cff);
  border: none;
  padding: 16px;
  font-size: 16px;
  border-radius: 16px;
  color: #fff;
  width: 100%;
  max-width: 320px;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(159,140,255,0.6);
}

.void-info {
  margin-top: 14px;
  font-size: 15px;
  opacity: 0.85;
}

/* ===== TABBAR ===== */
#tabbar {
  position: fixed;
  bottom: 14px;
  left: 14px;
  right: 14px;
  height: 64px;
  background: rgba(20,20,30,0.6);
  backdrop-filter: blur(14px);
  border-radius: 20px;
  display: flex;
  justify-content: space-around;
  align-items: center;
  border: 1px solid rgba(255,255,255,0.08);
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
}

.tab {
  flex: 1;
  color: #888;
  font-size: 12px;
  text-align: center;
}

.tab.active {
  color: #cbb6ff;
}
</style>
</head>

<body>

<h1>Dark Idle</h1>

<div id="game">
  <div class="void-card">

    <div class="void-ring" id="voidRing" onclick="collect()">
      <svg viewBox="0 0 200 200">
        <defs>
          <radialGradient id="ringGlow">
            <stop offset="55%" stop-color="#000"/>
            <stop offset="70%" stop-color="#6f42c1"/>
            <stop offset="85%" stop-color="#9f8cff"/>
            <stop offset="100%" stop-color="transparent"/>
          </radialGradient>

          <filter id="noise">
            <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2"/>
            <feDisplacementMap in="SourceGraphic" scale="8"/>
          </filter>
        </defs>

        <circle cx="100" cy="100" r="52" fill="#000"/>
        <circle cx="100" cy="100" r="72"
          fill="url(#ringGlow)"
          filter="url(#noise)"
          class="ring-spin"/>
      </svg>

      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>

    <div class="void-amount" id="counter">VOID: 0</div>
    <div class="void-sub">–¢—å–º–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤ –æ—Ç–≤–µ—Ç</div>

    <button onclick="collect()">–ò–∑–≤–ª–µ—á—å VOID</button>
    <div class="void-info" id="info"></div>

  </div>
</div>

<script>
const tg = Telegram.WebApp;
tg.ready();

let data = {
  voids: 0,
  rate: 1,
  is_vip: true,
  lastTime: Date.now()
};

function updateIdle() {
  const now = Date.now();
  const seconds = Math.floor((now - data.lastTime) / 1000);
  if (seconds > 0) {
    data.voids += seconds * data.rate * (data.is_vip ? 2 : 1);
    data.lastTime = now;
  }
}

function render() {
  document.getElementById("counter").innerText = `VOID: ${Math.floor(data.voids)}`;
  document.getElementById("info").innerText =
    `–°–∫–æ—Ä–æ—Å—Ç—å: ${data.rate} VOID/—Å–µ–∫ ${data.is_vip ? "üëë VIP" : ""}`;
}

function collect() {
  Telegram.WebApp.HapticFeedback.impactOccurred("light");

  const ring = document.getElementById("voidRing");
  ring.classList.add("active");

  setTimeout(() => ring.classList.remove("active"), 400);

  updateIdle();
  render();
}

render();
</script>

</body>
</html>
